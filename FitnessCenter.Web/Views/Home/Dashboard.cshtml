@{
    ViewData["Title"] = "Dashboard";
    var aktifUyelikSayisi = ViewBag.AktifUyelikSayisi ?? 0;
    var yaklasanRandevuSayisi = ViewBag.YaklasanRandevuSayisi ?? 0;
    var yaklasanRandevu = ViewBag.YaklasanRandevu as FitnessCenter.Web.Models.Entities.Randevu;
    var sonAiOneriTarihi = ViewBag.SonAiOneriTarihi as DateTime?;
    var kullaniciAdi = ViewBag.KullaniciAdi ?? "Ãœye";
}

<style>
/* Dashboard Hero Section */
.dashboard-hero {
    position: relative;
    min-height: 280px;
    display: flex;
    align-items: center;
    padding: 3rem 0;
    background:
        linear-gradient(135deg, rgba(31, 122, 99, 0.75) 0%, rgba(21, 94, 77, 0.85) 100%),
        url('/img/dashboard-bg.png') center/cover no-repeat;
    margin-top: -1rem;
    margin-bottom: 2rem;
}

.dashboard-hero::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(to top, var(--fc-body-bg), transparent);
}

.dashboard-hero .container {
    position: relative;
    z-index: 1;
}

.dashboard-hero h1 {
    color: #ffffff;
    font-size: 2.5rem;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    margin-bottom: 0.5rem;
}

.dashboard-hero p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.1rem;
    margin-bottom: 0;
}

.dashboard-hero .btn-fc-primary {
    background: #ffffff !important;
    color: var(--fc-primary) !important;
    border: none;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.dashboard-hero .btn-fc-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
}

.dashboard-hero .btn-fc-outline-primary {
    background: transparent !important;
    color: #ffffff !important;
    border: 2px solid rgba(255, 255, 255, 0.6) !important;
}

.dashboard-hero .btn-fc-outline-primary:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: #ffffff !important;
}

/* Quick Action Cards - Premium Style */
.quick-action-card {
    background: var(--fc-surface);
    border-radius: 16px;
    padding: 2rem 1.5rem;
    text-align: center;
    border: 1px solid var(--fc-border);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    display: block;
    height: 100%;
}

.quick-action-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 30px rgba(31, 122, 99, 0.15);
    border-color: var(--fc-primary-light);
}

.quick-action-icon {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
}

.quick-action-card h5 {
    color: var(--fc-text-main);
    font-weight: 600;
    font-size: 1rem;
    margin-bottom: 0.5rem;
}

.quick-action-card p {
    color: var(--fc-text-muted);
    font-size: 0.85rem;
    margin-bottom: 0;
}
</style>

<!-- Dashboard Hero Section with Background Image -->
<div class="dashboard-hero">
    <div class="container">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3">
            <div>
                <h1>Merhaba, @kullaniciAdi! ðŸ‘‹</h1>
                <p>Fitness yolculuÄŸunuzda bugÃ¼n neler yapmak istersiniz?</p>
            </div>
            <div class="d-flex gap-2">
                <a asp-controller="Randevu" asp-action="Create" class="btn-fc btn-fc-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Randevu Al
                </a>
                <a asp-controller="Ai" asp-action="Recommend" class="btn-fc btn-fc-outline-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 8V4H8"/>
                        <rect width="16" height="12" x="4" y="8" rx="2"/>
                        <path d="M2 14h2"/>
                        <path d="M20 14h2"/>
                        <path d="M15 13v2"/>
                        <path d="M9 13v2"/>
                    </svg>
                    AI Ã–neri Al
                </a>
            </div>
        </div>
    </div>
</div>

<div class="container pb-5">
    <!-- Summary Cards -->
    <div class="row g-4 mb-4">
        <!-- Aktif Ãœyelik -->
        <div class="col-md-6 col-lg-4">
            <div class="card-fc h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center gap-3">
                        <div class="flex-shrink-0">
                            <span class="d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 56px; height: 56px; background: linear-gradient(135deg, var(--fc-success-light), var(--fc-success)); color: white;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                    <line x1="1" y1="10" x2="23" y2="10"></line>
                                </svg>
                            </span>
                        </div>
                        <div class="flex-grow-1">
                            <div class="fs-2 fw-bold text-success">@aktifUyelikSayisi</div>
                            <div class="text-muted-fc">Aktif Ãœyelik</div>
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-top">
                        <a asp-controller="Uyelik" asp-action="Index" class="text-decoration-none d-flex align-items-center gap-1" style="color: var(--fc-primary);">
                            Ãœyeliklerimi GÃ¶rÃ¼ntÃ¼le
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- YaklaÅŸan Randevu -->
        <div class="col-md-6 col-lg-4">
            <div class="card-fc h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center gap-3">
                        <div class="flex-shrink-0">
                            <span class="d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 56px; height: 56px; background: linear-gradient(135deg, var(--fc-info-light), var(--fc-info)); color: white;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                            </span>
                        </div>
                        <div class="flex-grow-1">
                            <div class="fs-2 fw-bold text-info">@yaklasanRandevuSayisi</div>
                            <div class="text-muted-fc">YaklaÅŸan Randevu</div>
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-top">
                        <a asp-controller="Randevu" asp-action="Index" class="text-decoration-none d-flex align-items-center gap-1" style="color: var(--fc-primary);">
                            RandevularÄ±mÄ± GÃ¶rÃ¼ntÃ¼le
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Son AI Ã–nerisi -->
        <div class="col-md-6 col-lg-4">
            <div class="card-fc h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center gap-3">
                        <div class="flex-shrink-0">
                            <span class="d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 56px; height: 56px; background: linear-gradient(135deg, var(--fc-primary-light), var(--fc-primary)); color: white;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 8V4H8"/>
                                    <rect width="16" height="12" x="4" y="8" rx="2"/>
                                    <path d="M2 14h2"/>
                                    <path d="M20 14h2"/>
                                    <path d="M15 13v2"/>
                                    <path d="M9 13v2"/>
                                </svg>
                            </span>
                        </div>
                        <div class="flex-grow-1">
                            @if (sonAiOneriTarihi.HasValue)
                            {
                                <div class="fs-5 fw-bold">@sonAiOneriTarihi.Value.ToLocalTime().ToString("dd MMM")</div>
                                <div class="text-muted-fc">Son AI Ã–nerisi</div>
                            }
                            else
                            {
                                <div class="fs-5 fw-bold text-muted">â€”</div>
                                <div class="text-muted-fc">HenÃ¼z Ã¶neri yok</div>
                            }
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-top">
                        <a asp-controller="Ai" asp-action="History" class="text-decoration-none d-flex align-items-center gap-1" style="color: var(--fc-primary);">
                            Ã–nceki Ã–nerilerimi GÃ¶r
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upcoming Appointment Detail -->
    @if (yaklasanRandevu != null)
    {
        <div class="card-fc mb-4">
            <div class="card-header d-flex align-items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                YaklaÅŸan Randevunuz
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <div class="d-flex gap-4 flex-wrap">
                            <div>
                                <small class="text-muted-fc d-block">Tarih</small>
                                <strong>@yaklasanRandevu.BaslangicZamani.ToString("dd MMMM yyyy")</strong>
                            </div>
                            <div>
                                <small class="text-muted-fc d-block">Saat</small>
                                <strong>@yaklasanRandevu.BaslangicZamani.ToString("HH:mm") - @yaklasanRandevu.BitisZamani.ToString("HH:mm")</strong>
                            </div>
                            <div>
                                <small class="text-muted-fc d-block">Hizmet</small>
                                <strong>@yaklasanRandevu.Hizmet?.Ad</strong>
                            </div>
                            <div>
                                <small class="text-muted-fc d-block">EÄŸitmen</small>
                                <strong>@yaklasanRandevu.Egitmen?.AdSoyad</strong>
                            </div>
                            <div>
                                <small class="text-muted-fc d-block">Åžube</small>
                                <strong>@yaklasanRandevu.Salon?.Ad</strong>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        @if (yaklasanRandevu.Durum == "OnaylandÄ±")
                        {
                            <span class="badge-fc badge-fc-success">OnaylandÄ±</span>
                        }
                        else
                        {
                            <span class="badge-fc badge-fc-warning">Beklemede</span>
                        }
                    </div>
                </div>
            </div>
        </div>
    }

    <!-- Quick Actions - Premium Grid -->
    <h5 class="mb-3 fw-semibold">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2" style="color: var(--fc-primary);">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        HÄ±zlÄ± Ä°ÅŸlemler
    </h5>
    <div class="row g-4">
        <div class="col-6 col-lg-3">
            <a asp-controller="Randevu" asp-action="Create" class="quick-action-card">
                <div class="quick-action-icon" style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                        <line x1="12" y1="14" x2="12" y2="18"></line>
                        <line x1="10" y1="16" x2="14" y2="16"></line>
                    </svg>
                </div>
                <h5>Yeni Randevu</h5>
                <p>Hemen randevu oluÅŸturun</p>
            </a>
        </div>
        <div class="col-6 col-lg-3">
            <a asp-controller="Ai" asp-action="Recommend" class="quick-action-card">
                <div class="quick-action-icon" style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#059669" stroke-width="2">
                        <path d="M12 8V4H8"/>
                        <rect width="16" height="12" x="4" y="8" rx="2"/>
                        <path d="M2 14h2"/>
                        <path d="M20 14h2"/>
                        <path d="M15 13v2"/>
                        <path d="M9 13v2"/>
                    </svg>
                </div>
                <h5>AI Ã–neri Al</h5>
                <p>KiÅŸiselleÅŸtirilmiÅŸ program</p>
            </a>
        </div>
        <div class="col-6 col-lg-3">
            <a asp-controller="Randevu" asp-action="Egitmenlerim" class="quick-action-card">
                <div class="quick-action-icon" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </div>
                <h5>EÄŸitmenlerim</h5>
                <p>SalonlarÄ±nÄ±zdaki eÄŸitmenler</p>
            </a>
        </div>
        <div class="col-6 col-lg-3">
            <a asp-controller="Randevu" asp-action="Calendar" class="quick-action-card">
                <div class="quick-action-icon" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                </div>
                <h5>Takvimim</h5>
                <p>RandevularÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyin</p>
            </a>
        </div>
    </div>
</div>
